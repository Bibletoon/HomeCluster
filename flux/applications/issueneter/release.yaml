apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: issueneter
    namespace: issueneter
spec:
    interval: 10m
    chart:
        spec:
            chart: application
            version: '4.2.6'
            sourceRef:
                kind: HelmRepository
                name: stakater
                namespace: application
            interval: 1h
    values:
        applicationName: "issueneter"
        deployment:
            enabled: true
            reloadOnChange: true
            env:
                CONFIG_PATH:
                    value: /config
            volumes:
                config:
                    secret:
                        secretName: issueneter
            volumeMounts:
                config:
                    mountPath: /config
            image:
                repository: bibletoon/issueneter
                tag: 0.0.4
            containerSecurityContext:
                readOnlyRootFilesystem: true
                runAsNonRoot: false
        service:
            enabled: true
        ingress:
            enabled: true
            ingressClassName: traefik
            annotations:
                traefik.ingress.kubernetes.io/router.middlewares: default-allow-local-only@kubernetescrd
            hosts:
                - host: issueneter.biblehome.xyz
                  paths:
                      - path: /